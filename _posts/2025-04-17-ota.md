---
layout: single
title:  "OTA"
categories: autoever
tag: 
author_profile: false #true면 글 안에서 내 프로필 보여줌
sidebar:
    nav: "counts"
#search: false
---

# 느낀점


# OTA 개요

## 과정

ota 는 다운로드와 설치 단계가 있다. 다운로드는 주행중해도되지만 설치는 주차돼있을때 해야한다.   

sota: 쉬움   
   
fota: 하드웨어를 다룰 수 있는 low level control 을 할 수 있다.   

centralized architecture: 이 아키텍처가 표준화되어야한다.   

```c
수직 구성

OTA Server : DM(Download Management) Master  
ㅣ
ㅣ<Wireless Comm. lte. 얘만 무선>
ㅣ

DCU (Modem) : 서버와 무선통신 수행(LTE, WiFi, WAVE, etc)
ㅣ
ㅣ<In-Vehicle Network, 여기서부턴 유선>
ㅣ
Master ECU : DM Client 및 OTA Master 를 포함.
버전 체크, 무선 다운로드, 리프로그래밍 수행
ROM file 관리, OTA 우선순위 판단 등을 수행
ㅣ
ㅣ
ㅣ
Target ECU
```
   
✅ ECU 엔 업데이트 영역과 작동 영역으로 a,b 두 개로 나눠진다.   
<img src="https://github.com/user-attachments/assets/d9c42c29-e48d-45ae-a473-1a8e377187bf" width="900" height="330">   

## TUF

freshness 라는게 차이가 나는 속성이 있다. 이유에 대해서 한번 다시 보자.   

# 실습

## 서버세팅

책에 나와있는대로 세팅하고, <https://mosquitto.org/download/> 에 들어가서 mosquitto-64 로 다운받으면된다.   
   
```c
1. 라즈베리파이세팅
2. C:/programs에 있는 mosquito 를 우클릭하여 cmd 로 열기 한다.
3. 라즈베리파이를 broker 로 만들거다.
4. 가상환경 세팅을 했던거같다.
5. 라즈베리파이 업데이트를 한다.

이후는 책을 따라한다.
```

## mosquitto broker pub1, sub2 개

아 그리고 우선 vim 설치도 하고 세팅도했다.(구글링 고고)   
✅ putty 로 pubisher 1개, sub 2개를 설정했다.   
<img src="https://github.com/user-attachments/assets/e25477db-f07e-4a7b-810b-2794480ac58c" width="900" height="640">   

# 실습

## 서버에서 매번 같은 메세지를 발생시키게하기

p.96의 그림을 참고하면된다. 

새로운 폴더를 만들고 그 안에 py 파일을 하나 새로 만들었다.   


pip install paho-mqtt
